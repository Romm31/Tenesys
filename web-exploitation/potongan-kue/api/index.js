const express = require("express");
const path = require("path");

const app = express();
app.use(express.static(path.join(__dirname, "../public")));

const cookieValues = {
    1: "Haloo apakabar",
    5: "Masih belum ayo semangat!!!",
    8: "Belumm cuyyy yahahaha",
    15: "tenesys{ahhfakeflag}",
    20: "tenesys{percaya_ini_fake_flah}",
    25: "Kukira flag doang fake, ternyata perasaan dia jugaðŸ¥¹",
    30: "Dahh ahh cape ini flagnya.....",
    35: "Ciuss capek gua banh",
    40: "Broo srius gw capek",
    43: "Lanjut lahhh",
    47: "Belum capek kah cuyyy??",
    50: "duhh leee",
    55: "Jirrr niat amat",
    60: "nawaitu nyari flag",
    65: "awokawok blm Nemu yahh??",
    67: "Nihh flag : ten",
    70: "blm jirr",
    73: "nihh potongan 1lagi : esys",
    77: "sabar yahh",
    80: "blm cuyyy sabarrr",
    84: "next potongan cui : {d4h_lah",
    88: "semangat ngabbsss",
    93: "nihhh potongan kue 3 : _c@pekkk",
    96: "blm capek banh??",
    103: "nihh potongan 4 : _4k_Mw",
    108: "Awokwok cari potongan 5 sana!!!",
    111: "nihhh potongan tambahan : _Ku3",
    117: "nihh last flagg : Jug@}",
    120: "sodakowlohuladzim"
};

function getRandomMessage() {
    const randomMessages = [
        "Coba angka lain untuk menemukan potongan kue!",
        "Belum nemu? Coba angka lain!",
        "Flagnya ada di sekitar sini, tapi bukan ini...",
        "Coba terus, mungkin kamu beruntung!",
        "Masih salah, lanjutkan pencarian!",
        "Potongan kue ada di angka tertentu, cari yang benar!"
    ];
    return randomMessages[Math.floor(Math.random() * randomMessages.length)];
}

app.get("/", (req, res) => {
    const cookieId = parseInt(req.headers.cookie?.replace("kue=", ""), 10) || 0;
    
    if (cookieId >= 1 && cookieId <= 120) {
        res.send(cookieValues[cookieId] || getRandomMessage());
    } else {
        res.send(getRandomMessage());
    }
});

module.exports = app;
